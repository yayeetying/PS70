<!DOCTYPE html>

<html lang="en">
    <head>
        <link href="../styles.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link href="../styles.css" rel="stylesheet">
        <title>Week 11</title>

    </head>
    <body>
        <div class="header darkBlued">
            <h1>PS70 <br> Week 11</h1>
        </div>

        <!-- Nav Bar -->
        <div>
          <ul class="navBar">
              <li class="barItem blueHover"><a href="../index.html">Home</a></li>
              <li id="menu" class="barItem blueHover">
                <a class="blued" href="#">Assignments</a>
                <ul id="dropdown">
                  <li> <a href="../index.html"> Week 1 </a></li>
                  <li> <a href="week2.html"> Week 2 </a></li>
                  <li> <a href="week3.html"> Week 3 </a></li>
                  <li> <a href="week4.html"> Week 4 </a></li>
                  <li> <a href="week5.html"> Week 5 </a></li>
                  <li> <a href="week6.html"> Week 6 </a></li>
                  <li> <a href="week7.html"> Week 7 </a></li>
                  <li> <a href="week8.html"> Week 8 </a></li>
                  <li> <a href="week9.html"> Week 9 </a></li>
                  <li> <a href="week10.html"> Week 10 </a></li>
                  <li> <a href="week11.html"> Week 11 </a></li>
                  <li> <a href="week12.html"> Week 12 </a></li>
                </ul>
              </li>
              <li class="barItem blueHover"><a href="../about.html">About</a></li>
              <!-- Colored box denotes active tab -->
              <li class="barItem blueHover"><a href="../proposal.html">Final Project</a></li>
          </ul>
        </div>

        <div class="container">
            <div class="section">
                <h3><b>Machine Building GroupWork!</b></h3>
                <hr> <!-- Adds horizontal line -->
  
                <h4><b>Documentation found <a href="https://yanyans360.github.io/PHYS70-2024-Aiyanna/10_machine/index.html">here</a></b></h4>
                <br>
                <p>Part of the <b>controller group</b>, we now have code that controls both the motor (which listens to input from 
                the joystick) so that the robot moves forwards or backwards, and the servo motor so that the robot 
                can rotate left and right.
                </p>
                <pre>
                    <code>
                        #include ESP32Servo.h

                            // Define pin connections
                            const int vrxPin = 2;
                            const int vryPin = 3;
                            const int motorPin = 4;
                            
                            Servo servo;
                            
                            void setup() {
                              // Initialize Serial Monitor for debugging
                              Serial.begin(115200);
                            
                              servo.attach(motorPin);
                              pinMode(vrxPin, INPUT);
                              pinMode(vryPin, INPUT);
                            }
                            
                            void loop() {
                              int xValue = analogRead(vrxPin);
                            
                              // Map the joystick value to the servo angle
                              int servoAngle = map(xValue, 0, 4095, 0, 180);
                            
                              if (xValue >= 2300 && xValue <= 2350) {
                                servoAngle = 90;
                              }
                            
                              // Debug output to Serial Monitor
                              Serial.print("Joystick X Value: ");
                              Serial.print(xValue);
                              Serial.print(" | Servo Angle: ");
                              Serial.println(servoAngle);
                            
                              // Write the angle to the servo
                              servo.write(servoAngle);
                              
                              // Delay might be necessary but might not be
                              delay(50);
                            }
                    </code>
                </pre>
            </div>
          </div>

    <footer class="darkBlued">
        <p> &#169; Yaying Liang Li 2024<br>
            Email me <a href="mailto:yliangli@college.harvard.edu"> here! </a> </p>
    </footer>

    </body>
</html>